<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Task Queue Design Pattern in Modern C++ | Dr. Vladimir Petukhov</title>
    <meta name="description" content="A portfolio site as a general C++/Python programmer, general algorithms developer, industrial computer vision engineer, machine learning engineer and web apps developer.">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-6HX7S00F14"></script>
  <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6HX7S00F14');</script>
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.3c7c2e09.css" as="style"><link rel="preload" href="/assets/js/app.180eebd7.js" as="script"><link rel="preload" href="/assets/js/8.1b2dc3df.js" as="script"><link rel="prefetch" href="/assets/js/10.9e246527.js"><link rel="prefetch" href="/assets/js/11.f093e171.js"><link rel="prefetch" href="/assets/js/12.e9b7f08a.js"><link rel="prefetch" href="/assets/js/13.fa47007a.js"><link rel="prefetch" href="/assets/js/14.60cf40c7.js"><link rel="prefetch" href="/assets/js/15.d2c3c64d.js"><link rel="prefetch" href="/assets/js/16.4a30f428.js"><link rel="prefetch" href="/assets/js/17.51aec36c.js"><link rel="prefetch" href="/assets/js/2.a873dd49.js"><link rel="prefetch" href="/assets/js/3.589839d9.js"><link rel="prefetch" href="/assets/js/4.f4ac6c29.js"><link rel="prefetch" href="/assets/js/5.91d9c5dd.js"><link rel="prefetch" href="/assets/js/6.0c9cba5d.js"><link rel="prefetch" href="/assets/js/7.5b9dc384.js"><link rel="prefetch" href="/assets/js/9.34bd3a85.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3c7c2e09.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Dr. Vladimir Petukhov</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Services/" class="nav-link">Services</a></div><div class="nav-item"><a href="/Contact/" class="nav-link">Contact Information</a></div><div class="nav-item"><a href="/Resume/" class="nav-link">CV</a></div><div class="nav-item"><a href="/Blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="https://github.com/vperepos" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Services/" class="nav-link">Services</a></div><div class="nav-item"><a href="/Contact/" class="nav-link">Contact Information</a></div><div class="nav-item"><a href="/Resume/" class="nav-link">CV</a></div><div class="nav-item"><a href="/Blog/" class="nav-link router-link-active">Blog</a></div><div class="nav-item"><a href="https://github.com/vperepos" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Task Queue Design Pattern in Modern C++</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Blog/task-queue-design-pattern.html#motivation" class="sidebar-link">Motivation</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Blog/task-queue-design-pattern.html#classes-structure-and-functionality" class="sidebar-link">Classes structure and functionality</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="task-queue-design-pattern-in-modern-c"><a href="#task-queue-design-pattern-in-modern-c" class="header-anchor">#</a> Task queue design pattern in modern C++</h1> <p><a href="https://github.com/VPERepos/TaskQueueDesignPattern/tree/main" target="_blank" rel="noopener noreferrer">Code on Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>Imagine, that you have some data that you would like to process, but the way to process it can be combined of a lot of simple steps, that, in general, can be mixed up with each other, giving different orders of computation. For example, you have many images and it is necessary to process them and get some information out of them. You have also a library that consists of different computer vision algorithms, but you still don't know which is the most optimal way to apply those algorithms. Developing the procedure is time consuming due to checking many combinations and tuning parameters of algorithms. It is also very helpfull to be able to control the results after each step. My solution would be to program a tool with user interface, that lists in one window all possible steps, which can be chosen and added to the next window describing the resulting procedure. This is exactly the case, where a task queue design pattern can be applied. The steps from the resulting procedure are put into a task queue and then processed one after another. The example in this project is much simpler and somehow abstract, because it is made just to represent the idea.</p> <h2 id="classes-structure-and-functionality"><a href="#classes-structure-and-functionality" class="header-anchor">#</a> Classes structure and functionality</h2> <p><img src="/assets/img/ClassDiagramQueue.b4017eb2.svg" alt="UMLDiagram"></p> <p>UML-diagram above represents a design of the example program. There is a class called TaskQueue, which consists of shared pointers to the objects of classes Data, Status and Task1 to Task4. The shared pointers of types Status and Data are passed by reference to the parameters of the constructor of the TaskQueue class. The objects of Task1 to Task4 types are allocated on heap in this constructor. During initialization of tasks, they are given unique names, which are contained in a sorted order in a vector. There is also a map with names as keys and pointers as values. This is needed in order to be able to clear and fill out the main queue in the necessary way from outside in the consumer function. Objects of types Data, Status and TaskQueue are allocated on heap in the main function. Objects of types Task1 to Task4 have a function executeTask(). This function can be powered with any custom business logic that processes an object of the type Data. The loop in the function runTQ() takes the front element of the constructed queue and calls the function executeTask(). Afterwards the front element is deleted from the queue. This proceeds until the queue is empty.</p> <p>The principle program flow is described by the following sequence diagram
<img src="/assets/img/SequenceDiagramQueue.7b3d6b83.svg" alt="UMLDiagram"></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.180eebd7.js" defer></script><script src="/assets/js/8.1b2dc3df.js" defer></script>
  </body>
</html>
